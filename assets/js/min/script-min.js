"use strict";var timer,typingEffect=function(){var t=words[wordIndex].split("");(function e(){if(!(0<t.length))return setTimeout(function(){deletingEffect()},2e3),!1;document.querySelector(".typewriting").innerHTML+=t.shift(),timer=setTimeout(e,100)})()},deletingEffect=function(){var t=words[wordIndex].split("");(function e(){if(!(0<t.length))return words.length>wordIndex+1?wordIndex++:wordIndex=0,typingEffect(),!1;t.pop(),document.querySelector(".typewriting").innerHTML=t.join(""),timer=setTimeout(e,100)})()},words=["Web Designer","Front-End Developer"],wordIndex=0;typingEffect();var body=document.querySelector("body"),header=document.querySelector("header"),menu=document.querySelector(".menu"),menuIcon=document.querySelector(".menu__open"),navPrimary=document.querySelector("#nav-primary"),navMobile=document.querySelector("#nav-mobile"),navItems=document.querySelectorAll('#nav-mobile a[href^="#"]');menu.addEventListener("click",function(){navPrimary.classList.toggle("active"),menuIcon.classList.toggle("menu__open--active"),header.classList.toggle("open"),navMobile.classList.toggle("open"),body.classList.toggle("disable")}),window.addEventListener("click",function(t){navItems.forEach(function(e){e.contains(t.target)&&(header.classList.remove("open"),navMobile.classList.remove("open"),body.classList.remove("disable"),menuIcon.classList.remove("menu__open--active"))})});var _header=document.querySelector("header"),onChangeHeader=function(){100<=window.pageYOffset?_header.classList.add("active"):_header.classList.remove("active")};window.addEventListener("scroll",function(){onChangeHeader()}),window.addEventListener("load",function(){onChangeHeader()});var tabs=document.querySelectorAll('a[href^="#tab"]'),tabContents=document.querySelectorAll(".work-row");tabs.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),removeActive(),addActive(t)})});var removeActive=function(){tabs.forEach(function(e){e.classList.remove("active")}),tabContents.forEach(function(e){e.classList.remove("active")})},addActive=function(e){e.classList.add("active"),document.querySelector("".concat(e.getAttribute("href"))).classList.add("active")};function calcActiveLine(e,t,n){for(var o=0,i=0;i<e;i++)o+=t[i].offsetWidth;n.style.transform="translateX(".concat(o,"px)"),n.style.width=t[e].offsetWidth+"px"}var filterBtns=document.querySelectorAll(".js-filter-btn"),filterBtnActiveLine=document.querySelector(".js-active-line"),filterBtnActive=document.querySelector(".js-filter-btn.active"),activeFilterIndex=0;if(0!=filterBtns.length){for(var _loop=function(e){filterBtns[e].addEventListener("click",function(){calcActiveLine(activeFilterIndex=e,filterBtns,filterBtnActiveLine)})},i=0;i<filterBtns.length;i++)_loop(i);window.addEventListener("resize",function(){filterBtnActiveLine.style.width=filterBtnActive.offsetWidth+"px";for(var e=0;e<filterBtns.length;e++)calcActiveLine(activeFilterIndex,filterBtns,filterBtnActiveLine);filterBtns.forEach(function(e,t){e.classList.contains("filter__btn--active")&&calcActiveLine(t,filterBtns,filterBtnActiveLine)})}),window.addEventListener("load",function(){filterBtnActiveLine.style.width=filterBtnActive.offsetWidth+"px",filterBtns.forEach(function(e,t){e.classList.contains("filter__btn--active")&&calcActiveLine(t,filterBtns,filterBtnActiveLine)})})}var scrollController=new ScrollMagic.Controller,debug=!1,triggerHook=.8,_header2=function(){var e=document.querySelector("header"),t=gsap.timeline();t.to(e,{duration:0,opacity:0,y:20}),t.to(e,{duration:.8,opacity:1,y:0}),animate(e,t)},introAnimations=function(){var e=document.querySelector("#intro"),t=gsap.timeline();t.to(e,{duration:0,opacity:0,y:20}),t.to(e,{duration:.8,opacity:1,y:0}),animate(e,t)},workAnimations=function(){var e=document.querySelector("#work"),t=e.querySelector(".js-work-toggle"),n=e.querySelectorAll(".js-work-item"),o=gsap.timeline();o.to(t,{duration:0,opacity:0,y:20});for(var i=0;i<n.length;i++)o.to(n[i],{duration:0,opacity:0});o.to(t,{duration:.8,opacity:1,y:0});for(var r=0;r<n.length;r++)o.to(n[r],{duration:.8,opacity:1},"-=0.7");animate(e,o)},aboutAnimation=function(){var e=document.querySelector("#about"),t=e.querySelector(".js-about-description"),n=e.querySelectorAll(".js-about-card"),o=gsap.timeline();o.to(t,{duration:0,opacity:0,y:20});for(var i=0;i<n.length;i++)o.to(n[i],{duration:0,opacity:0,y:20});o.to(t,{duration:.8,opacity:1,y:0});for(var r=0;r<n.length;r++)o.to(n[r],{duration:.8,opacity:1,y:0},"-=0.7");animate(e,o)},contactAnimation=function(){var e=document.querySelector("#contact"),t=e.querySelector(".js-contact-title"),n=e.querySelectorAll(".js-contact-item"),o=e.querySelectorAll(".js-contact-content"),i=gsap.timeline();i.to(t,{duration:0,opacity:0,y:20});for(var r=0;r<n.length;r++)i.to(n[r],{duration:0,opacity:0,y:20});i.to(o,{duration:0,opacity:0,y:20}),i.to(t,{duration:.8,opacity:1,y:0});for(var a=0;a<n.length;a++)i.to(n[a],{duration:.8,opacity:1,y:0},"-=0.7");i.to(o,{duration:.8,opacity:1,y:0},"-=0.7"),animate(e,i)};function addClass(e){e=new ScrollMagic.Scene({reverse:!1,triggerHook:triggerHook,triggerElement:e}).setClassToggle(e,"revealed").addTo(scrollController);debug&&e.addIndicators()}function animate(e,t){t=new ScrollMagic.Scene({reverse:!1,triggerHook:triggerHook,triggerElement:e}).setTween(t).addTo(scrollController);debug&&t.addIndicators()}_header2(),introAnimations(),workAnimations(),aboutAnimation(),contactAnimation();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJ0eXBpbmdFZmZlY3QiLCJsb29wVHlwaW5nIiwid29yZEluZGV4IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZGVsZXRpbmdFZmZlY3QiLCJpbm5lckhUTUwiLCJ3b3JkIiwic2hpZnQiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJ3b3JkcyIsInNwbGl0IiwibGVuZ3RoIiwicG9wIiwibG9vcERlbGV0aW5nIiwiam9pbiIsImhlYWRlciIsIm1lbnUiLCJuYXZJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuYXZQcmltYXJ5IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwibWVudUljb24iLCJuYXZNb2JpbGUiLCJib2R5Iiwid2luZG93IiwiZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJhZGQiLCJvbkNoYW5nZUhlYWRlciIsInRhYkNvbnRlbnRzIiwidGFiIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmVBY3RpdmUiLCJhZGRBY3RpdmUiLCJmb3JFYWNoIiwiY29udGVudCIsImNvbmNhdCIsImdldEF0dHJpYnV0ZSIsInRhYkNvbnRlbnQiLCJhY3RpdmVMaW5lIiwiaiIsImFjdGl2ZUluZGV4Iiwib2Zmc2V0IiwiYnV0dG9uIiwib2Zmc2V0V2lkdGgiLCJzdHlsZSIsInRyYW5zZm9ybSIsImNhbGNBY3RpdmVMaW5lIiwiZmlsdGVyQnRucyIsImZpbHRlckJ0bkFjdGl2ZSIsImFjdGl2ZUZpbHRlckluZGV4IiwiaSIsImZpbHRlckJ0bkFjdGl2ZUxpbmUiLCJfbG9vcCIsIndpZHRoIiwiYnRuIiwiaW5kZXgiLCJjb250YWlucyIsInNjcm9sbENvbnRyb2xsZXIiLCJTY3JvbGxNYWdpYyIsIkNvbnRyb2xsZXIiLCJkZWJ1ZyIsInRyaWdnZXJFbGVtZW50IiwidGwiLCJnc2FwIiwidGltZWxpbmUiLCJ0cmlnZ2VySG9vayIsImR1cmF0aW9uIiwib3BhY2l0eSIsInRvIiwieSIsImFuaW1hdGUiLCJpbnRyb0FuaW1hdGlvbnMiLCJ3b3JrQW5pbWF0aW9ucyIsIndvcmtJdGVtIiwid29ya1RvZ2dsZSIsImFib3V0RGVzY3JpcHRpb24iLCJhYm91dENhcmRzIiwiYWJvdXRBbmltYXRpb24iLCJjb250YWN0QW5pbWF0aW9uIiwiY29udGFjdENvbnRlbnQiLCJjb250YWN0VGl0bGUiLCJjb250YWN0SXRlbXMiLCJhZGRDbGFzcyIsInNjZW5lIiwiU2NlbmUiLCJzZXRDbGFzc1RvZ2dsZSIsImFkZEluZGljYXRvcnMiLCJyZXZlcnNlIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUtXQSxNQUFBQSxhQUFULFdBRUUsSUFBSUMsRUFBQUEsTUFBYUMsV0FBYkQsTUFBQUEsS0FDRSxTQUFKQSxJQUNFRSxLQUFTQyxFQUFURCxFQUFBQSxRQU1ELE9BSEdFLFdBQUFBLFdBRFFBLGtCQUdWLE1BQ0QsRUFQREYsU0FFT0MsY0FBQSxnQkFBQUUsV0FBQUMsRUFBQUMsUUFLTkMsTUFBQUMsV0FBQVQsRUFBQSxNQUVGQSxJQWpCTEksZUFtQkcsV0FHQyxJQUFJRSxFQUFPSSxNQUFNVCxXQUFXVSxNQUFNLEtBRHBDLFNBQVNQLElBQ1AsS0FBaUJILEVBQWJLLEVBQU9JLFFBU0xULE9BTkVTLE1BQUpFLE9BQUFYLFVBQUEsRUFDQUMsWUFFQUQsVUFBVVcsRUFFVGIsZ0JBQ0NFLEVBTkZLLEVBQUtPLE1BRkxDLFNBQUFBLGNBQWUsZ0JBQVdULFVBQUFDLEVBQUFTLEtBQUEsSUFhNUJQLE1BQVFDLFdBQVdLLEVBQWMsTUFIL0JmLElBbENSVyxNQUFBLENBQUEsZUFBQSx1QkFDQVQsVUFBQSxFQXlDRUYsZUFIRWUsSUFBQUEsS0FBQUEsU0FBWVgsY0FBQSxRQXRDaEJhLE9BQUFkLFNBQUFDLGNBQUEsVUFnRFFjLEtBQU9mLFNBQVNDLGNBQWMsU0EvQzlCTyxTQUFTUixTQUFBQyxjQUFnQixlQUMzQkYsV0FBSkMsU0FBQUMsY0FBQSxnQkFDSUssVUFBSk4sU0FBQUMsY0FBQSxlQWdCQ2UsU0FBQWhCLFNBQUFpQixpQkFBQSw0QkFzQkRwQixLQUFB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QUFJbkIsRUFBSSxFQUFHQSxFQUFJK0IsRUFBYXpFLE9BQVEwQyxJQVh0Q1ksRUFBRk0sR0FBTVcsRUFBTjdCLEdBQXNCLENBQ3BCZ0IsU0FEb0IsR0FFcEJDLFFBRm9CLEVBR25CRSxFQUFFLEdBRUwsU0FDQVAsRUFBR00sR0FBR1ksRUFBYyxDQUNsQmQsU0FBVSxHQUNWQyxRQUFTLEVBQ1RFLEVBQUcsR0FITCxTQUtBQyxRQUFJVCxFQUFlb0IsSUFNbEIsU0FBQUMsU0FBQXJCLEdBY0dzQixFQUFRLElBQUl6QixZQUFZMEIsTUFBTSxDQWJsQ3RCLFNBQU1pQixFQUNKYixZQUFVRCxZQUNWRSxlQUZvQk4sSUFBQXdCLGVBQXRCeEIsRUFBQSxZQU1BUyxNQUFBQSxrQkFlQ1YsT0F0S0hoRCxFQUFNMEUsZ0JBR05ULFNBQUFBLFFBQWNoQixFQUFBQyxHQUNkZ0IsRUFBQUEsSUFBZ0JwQixZQUFBMEIsTUFBQSxDQXdKbEJHLFNBQUEsRUFtQkl0QixZQUFhQSxZQWxCakJKLGVBQWtCQSxJQUVkMEIsU0FBT3pCLEdBQ1BHLE1BQUFBLGtCQUdEb0IsT0FHREYsRUFBR3ZCLGdCQW5MQ2hELFdBQ0VrQyxrQkFDRDBCLGlCQUNGSyxpQkFDRkMiLCJmaWxlIjoic2NyaXB0LW1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLS0tLSBUWVBFV1JJVElORyBFRkZFQ1QgLS0tLS8vXHJcbntcclxuICBjb25zdCB3b3JkcyA9IFtcIldlYiBEZXNpZ25lclwiLCBcIkZyb250LUVuZCBEZXZlbG9wZXJcIl07XHJcbiAgbGV0IHdvcmRJbmRleCA9IDA7XHJcbiAgbGV0IHRpbWVyO1xyXG4gIFxyXG4gIGZ1bmN0aW9uIHR5cGluZ0VmZmVjdCgpIHtcclxuICAgIGxldCB3b3JkID0gd29yZHNbd29yZEluZGV4XS5zcGxpdChcIlwiKTtcclxuICAgIHZhciBsb29wVHlwaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICh3b3JkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHlwZXdyaXRpbmcnKS5pbm5lckhUTUwgKz0gd29yZC5zaGlmdCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgIGRlbGV0aW5nRWZmZWN0KCk7XHJcbiAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9O1xyXG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQobG9vcFR5cGluZywgMTAwKTtcclxuICAgIH07XHJcbiAgICBsb29wVHlwaW5nKCk7XHJcbiAgfTtcclxuICBcclxuICBmdW5jdGlvbiBkZWxldGluZ0VmZmVjdCgpIHtcclxuICAgIGxldCB3b3JkID0gd29yZHNbd29yZEluZGV4XS5zcGxpdChcIlwiKTtcclxuICAgIHZhciBsb29wRGVsZXRpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKHdvcmQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHdvcmQucG9wKCk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR5cGV3cml0aW5nJykuaW5uZXJIVE1MID0gd29yZC5qb2luKFwiXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPiAod29yZEluZGV4ICsgMSkpIHtcclxuICAgICAgICAgIHdvcmRJbmRleCsrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB3b3JkSW5kZXggPSAwO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdHlwaW5nRWZmZWN0KCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9O1xyXG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQobG9vcERlbGV0aW5nLCAxMDApO1xyXG4gICAgfTtcclxuICAgIGxvb3BEZWxldGluZygpO1xyXG4gIH07XHJcblxyXG4gIHR5cGluZ0VmZmVjdCgpO1xyXG59XHJcblxyXG4vLy0tLS0gTkFWSUdBVElPTiAtLS0tLy9cclxue1xyXG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJyk7XHJcbiAgY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51Jyk7XHJcbiAgY29uc3QgbWVudUljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudV9fb3BlbicpO1xyXG4gIGNvbnN0IG5hdlByaW1hcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmF2LXByaW1hcnknKTtcclxuICBjb25zdCBuYXZNb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmF2LW1vYmlsZScpO1xyXG4gIGNvbnN0IG5hdkl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI25hdi1tb2JpbGUgYVtocmVmXj1cIiNcIl0nKTtcclxuXHJcbiAgbWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIG5hdlByaW1hcnkuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbiAgICBtZW51SWNvbi5jbGFzc0xpc3QudG9nZ2xlKCdtZW51X19vcGVuLS1hY3RpdmUnKTtcclxuICAgIC8vXHJcbiAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xyXG4gICAgbmF2TW9iaWxlLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcclxuICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZScpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBjb25zb2xlLmxvZyhuYXZJdGVtKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXsgIFxyXG4gICAgbmF2SXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgaWYgKGl0ZW0uY29udGFpbnMoZS50YXJnZXQpKXtcclxuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xyXG4gICAgICAgIG5hdk1vYmlsZS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XHJcbiAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlJyk7XHJcbiAgICAgICAgbWVudUljb24uY2xhc3NMaXN0LnJlbW92ZSgnbWVudV9fb3Blbi0tYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgIH0pOyBcclxuICB9KTtcclxufVxyXG4vLy0tLS0gTkFWSUdBVElPTiAtLS0tLy9cclxue1xyXG4gIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpO1xyXG5cclxuICBjb25zdCBvbkNoYW5nZUhlYWRlciA9ICgpID0+IHtcclxuICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPj0gMTAwKSB7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XHJcbiAgICBvbkNoYW5nZUhlYWRlcigpO1xyXG4gIH0pO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgIG9uQ2hhbmdlSGVhZGVyKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vLS0tLSBUQUJTIFRPR0dMRSAtLS0tLy9cclxue1xyXG4gIGNvbnN0IHRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWZePVwiI3RhYlwiXScpO1xyXG4gIGNvbnN0IHRhYkNvbnRlbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndvcmstcm93Jyk7XHJcblxyXG4gIHRhYnMuZm9yRWFjaCh0YWIgPT4ge1xyXG4gICAgdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICByZW1vdmVBY3RpdmUoKTtcclxuICAgICAgYWRkQWN0aXZlKHRhYik7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgcmVtb3ZlQWN0aXZlID0gKCkgPT4ge1xyXG4gICAgdGFicy5mb3JFYWNoKHRhYiA9PiB7XHJcbiAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG4gICAgdGFiQ29udGVudHMuZm9yRWFjaChjb250ZW50ID0+IHtcclxuICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgYWRkQWN0aXZlID0gKHRhYikgPT4ge1xyXG4gICAgdGFiLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgY29uc3QgdGFiQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7dGFiLmdldEF0dHJpYnV0ZShcImhyZWZcIil9YCk7XHJcbiAgICB0YWJDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qIC0tLS0gRklMVEVSIEJVVFRPTiBTTElERVIgLS0tLSAqL1xyXG5mdW5jdGlvbiBjYWxjQWN0aXZlTGluZShhY3RpdmVJbmRleCwgYnV0dG9uLCBhY3RpdmVMaW5lKSB7XHJcbiAgbGV0IG9mZnNldCA9IDA7XHJcbiAgZm9yIChsZXQgaiA9IDA7IGogPCBhY3RpdmVJbmRleDsgaisrKSB7XHJcbiAgICBvZmZzZXQgKz0gYnV0dG9uW2pdLm9mZnNldFdpZHRoO1xyXG4gIH1cclxuICBhY3RpdmVMaW5lLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7b2Zmc2V0fXB4KWA7XHJcbiAgYWN0aXZlTGluZS5zdHlsZS53aWR0aCA9IGJ1dHRvblthY3RpdmVJbmRleF0ub2Zmc2V0V2lkdGggKyAncHgnO1xyXG59XHJcblxyXG5jb25zdCBmaWx0ZXJCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWZpbHRlci1idG4nKTtcclxuY29uc3QgZmlsdGVyQnRuQWN0aXZlTGluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1hY3RpdmUtbGluZScpO1xyXG5jb25zdCBmaWx0ZXJCdG5BY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZmlsdGVyLWJ0bi5hY3RpdmUnKTtcclxubGV0IGFjdGl2ZUZpbHRlckluZGV4ID0gMDtcclxuXHJcbmlmIChmaWx0ZXJCdG5zLmxlbmd0aCAhPSAwKSB7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWx0ZXJCdG5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBmaWx0ZXJCdG5zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGFjdGl2ZUZpbHRlckluZGV4ID0gaTtcclxuICAgICAgY2FsY0FjdGl2ZUxpbmUoYWN0aXZlRmlsdGVySW5kZXgsIGZpbHRlckJ0bnMsIGZpbHRlckJ0bkFjdGl2ZUxpbmUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgZmlsdGVyQnRuQWN0aXZlTGluZS5zdHlsZS53aWR0aCA9IGZpbHRlckJ0bkFjdGl2ZS5vZmZzZXRXaWR0aCArICdweCc7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbHRlckJ0bnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY2FsY0FjdGl2ZUxpbmUoYWN0aXZlRmlsdGVySW5kZXgsIGZpbHRlckJ0bnMsIGZpbHRlckJ0bkFjdGl2ZUxpbmUpO1xyXG4gICAgfVxyXG4gICAgZmlsdGVyQnRucy5mb3JFYWNoKChidG4sIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmIChidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWx0ZXJfX2J0bi0tYWN0aXZlJykpIHtcclxuICAgICAgICBjYWxjQWN0aXZlTGluZShpbmRleCwgZmlsdGVyQnRucywgZmlsdGVyQnRuQWN0aXZlTGluZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGZpbHRlckJ0bkFjdGl2ZUxpbmUuc3R5bGUud2lkdGggPSBmaWx0ZXJCdG5BY3RpdmUub2Zmc2V0V2lkdGggKyAncHgnO1xyXG4gICAgZmlsdGVyQnRucy5mb3JFYWNoKChidG4sIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmIChidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWx0ZXJfX2J0bi0tYWN0aXZlJykpIHtcclxuICAgICAgICBjYWxjQWN0aXZlTGluZShpbmRleCwgZmlsdGVyQnRucywgZmlsdGVyQnRuQWN0aXZlTGluZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLy0tLS0gQU5JTUFUSU9OUyAtLS0tLy9cclxuY29uc3Qgc2Nyb2xsQ29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyKCk7XHJcbmNvbnN0IGRlYnVnID0gZmFsc2U7XHJcbmNvbnN0IHRyaWdnZXJIb29rID0gMC44O1xyXG57XHJcbiAgLy9cclxuICBoZWFkZXIoKTtcclxuICBpbnRyb0FuaW1hdGlvbnMoKTtcclxuICB3b3JrQW5pbWF0aW9ucygpO1xyXG4gIGFib3V0QW5pbWF0aW9uKCk7XHJcbiAgY29udGFjdEFuaW1hdGlvbigpO1xyXG4gIC8vXHJcbiAgZnVuY3Rpb24gaGVhZGVyKCkge1xyXG4gICAgY29uc3QgdHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKTtcclxuXHJcbiAgICBjb25zdCB0bCA9IGdzYXAudGltZWxpbmUoKTtcclxuICAgIHRsLnRvKHRyaWdnZXJFbGVtZW50LCB7XHJcbiAgICAgIGR1cmF0aW9uOiAwLCBcclxuICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgeTogMjBcclxuICAgIH0pO1xyXG4gICAgLy8tLVxyXG4gICAgdGwudG8odHJpZ2dlckVsZW1lbnQsIHtcclxuICAgICAgZHVyYXRpb246IDAuOCwgXHJcbiAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgIHk6IDBcclxuICAgIH0pOyBcclxuXHJcbiAgICBhbmltYXRlKHRyaWdnZXJFbGVtZW50LCB0bCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGludHJvQW5pbWF0aW9ucygpIHtcclxuICAgIGNvbnN0IHRyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ludHJvJyk7XHJcblxyXG4gICAgY29uc3QgdGwgPSBnc2FwLnRpbWVsaW5lKCk7XHJcbiAgICB0bC50byh0cmlnZ2VyRWxlbWVudCwge1xyXG4gICAgICBkdXJhdGlvbjogMCwgXHJcbiAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgIHk6IDIwXHJcbiAgICB9KTtcclxuICAgIC8vLS1cclxuICAgIHRsLnRvKHRyaWdnZXJFbGVtZW50LCB7XHJcbiAgICAgIGR1cmF0aW9uOiAwLjgsIFxyXG4gICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICB5OiAwXHJcbiAgICB9KTsgXHJcblxyXG4gICAgYW5pbWF0ZSh0cmlnZ2VyRWxlbWVudCwgdGwpO1xyXG4gIH1cclxuICBmdW5jdGlvbiB3b3JrQW5pbWF0aW9ucygpIHtcclxuICAgIGNvbnN0IHRyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dvcmsnKTtcclxuICAgIGNvbnN0IHdvcmtUb2dnbGUgPSB0cmlnZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtd29yay10b2dnbGUnKTtcclxuICAgIGNvbnN0IHdvcmtJdGVtID0gdHJpZ2dlckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLXdvcmstaXRlbScpO1xyXG5cclxuICAgIGNvbnN0IHRsID0gZ3NhcC50aW1lbGluZSgpO1xyXG4gICAgdGwudG8od29ya1RvZ2dsZSwge1xyXG4gICAgICBkdXJhdGlvbjogMCwgXHJcbiAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgIHk6IDIwXHJcbiAgICB9KTtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB3b3JrSXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0bC50byh3b3JrSXRlbVtpXSwge1xyXG4gICAgICAgIGR1cmF0aW9uOiAwLCBcclxuICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgIH0pOyAgICAgIFxyXG4gICAgfVxyXG4gICAgLy8tLVxyXG4gICAgdGwudG8od29ya1RvZ2dsZSwge1xyXG4gICAgICBkdXJhdGlvbjogMC44LCBcclxuICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgeTogMFxyXG4gICAgfSk7ICBcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB3b3JrSXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0bC50byh3b3JrSXRlbVtpXSwge1xyXG4gICAgICAgIGR1cmF0aW9uOiAwLjgsIFxyXG4gICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgfSwgXCItPTAuN1wiKTsgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBhbmltYXRlKHRyaWdnZXJFbGVtZW50LCB0bCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGFib3V0QW5pbWF0aW9uKCkge1xyXG4gICAgY29uc3QgdHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWJvdXQnKTtcclxuICAgIGNvbnN0IGFib3V0RGVzY3JpcHRpb24gPSB0cmlnZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtYWJvdXQtZGVzY3JpcHRpb24nKTtcclxuICAgIGNvbnN0IGFib3V0Q2FyZHMgPSB0cmlnZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYWJvdXQtY2FyZCcpO1xyXG5cclxuICAgIGNvbnN0IHRsID0gZ3NhcC50aW1lbGluZSgpO1xyXG4gICAgdGwudG8oYWJvdXREZXNjcmlwdGlvbiwge1xyXG4gICAgICBkdXJhdGlvbjogMCwgXHJcbiAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgIHk6IDIwXHJcbiAgICB9KTtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhYm91dENhcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRsLnRvKGFib3V0Q2FyZHNbaV0sIHtcclxuICAgICAgICBkdXJhdGlvbjogMCwgXHJcbiAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICB5OiAyMFxyXG4gICAgICB9KTsgICAgICBcclxuICAgIH1cclxuICAgIC8vLS1cclxuICAgIHRsLnRvKGFib3V0RGVzY3JpcHRpb24sIHtcclxuICAgICAgZHVyYXRpb246IDAuOCwgXHJcbiAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgIHk6IDBcclxuICAgIH0pO1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGFib3V0Q2FyZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdGwudG8oYWJvdXRDYXJkc1tpXSwge1xyXG4gICAgICAgIGR1cmF0aW9uOiAwLjgsIFxyXG4gICAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgICAgeTogMFxyXG4gICAgICB9LCBcIi09MC43XCIpOyAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhbmltYXRlKHRyaWdnZXJFbGVtZW50LCB0bCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGNvbnRhY3RBbmltYXRpb24oKSB7XHJcbiAgICBjb25zdCB0cmlnZ2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250YWN0Jyk7XHJcbiAgICBjb25zdCBjb250YWN0VGl0bGUgPSB0cmlnZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtY29udGFjdC10aXRsZScpO1xyXG4gICAgY29uc3QgY29udGFjdEl0ZW1zID0gdHJpZ2dlckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNvbnRhY3QtaXRlbScpO1xyXG4gICAgY29uc3QgY29udGFjdENvbnRlbnQgPSB0cmlnZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtY29udGFjdC1jb250ZW50Jyk7XHJcblxyXG4gICAgY29uc3QgdGwgPSBnc2FwLnRpbWVsaW5lKCk7XHJcbiAgICB0bC50byhjb250YWN0VGl0bGUsIHtcclxuICAgICAgZHVyYXRpb246IDAsIFxyXG4gICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICB5OiAyMFxyXG4gICAgfSk7XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29udGFjdEl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRsLnRvKGNvbnRhY3RJdGVtc1tpXSwge1xyXG4gICAgICAgIGR1cmF0aW9uOiAwLCBcclxuICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgIHk6IDIwXHJcbiAgICAgIH0pOyAgICAgIFxyXG4gICAgfVxyXG4gICAgdGwudG8oY29udGFjdENvbnRlbnQsIHtcclxuICAgICAgZHVyYXRpb246IDAsIFxyXG4gICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICB5OiAyMFxyXG4gICAgfSk7XHJcbiAgICAvLy0tXHJcbiAgICB0bC50byhjb250YWN0VGl0bGUsIHtcclxuICAgICAgZHVyYXRpb246IDAuOCwgXHJcbiAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgIHk6IDBcclxuICAgIH0pO1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGNvbnRhY3RJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0bC50byhjb250YWN0SXRlbXNbaV0sIHtcclxuICAgICAgICBkdXJhdGlvbjogMC44LCBcclxuICAgICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICAgIHk6IDBcclxuICAgICAgfSwgXCItPTAuN1wiKTsgICAgICBcclxuICAgIH1cclxuICAgIHRsLnRvKGNvbnRhY3RDb250ZW50LCB7XHJcbiAgICAgIGR1cmF0aW9uOiAwLjgsIFxyXG4gICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICB5OiAwXHJcbiAgICB9LCBcIi09MC43XCIpO1xyXG5cclxuICAgIGFuaW1hdGUodHJpZ2dlckVsZW1lbnQsIHRsKTtcclxuICB9XHJcblxyXG59XHJcblxyXG4vLyBBbmltYXRpb24gZnVuY3Rpb25zXHJcbmZ1bmN0aW9uIGFkZENsYXNzKHRyaWdnZXJFbGVtZW50KSB7XHJcbiAgY29uc3Qgc2NlbmUgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe1xyXG4gICAgcmV2ZXJzZTogZmFsc2UsXHJcbiAgICB0cmlnZ2VySG9vazogdHJpZ2dlckhvb2ssXHJcbiAgICB0cmlnZ2VyRWxlbWVudDogdHJpZ2dlckVsZW1lbnRcclxuICB9KVxyXG4gIC5zZXRDbGFzc1RvZ2dsZSh0cmlnZ2VyRWxlbWVudCwgXCJyZXZlYWxlZFwiKVxyXG4gIC5hZGRUbyhzY3JvbGxDb250cm9sbGVyKTtcclxuICBcclxuICBpZihkZWJ1ZylcclxuICB7XHJcbiAgICBzY2VuZS5hZGRJbmRpY2F0b3JzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhbmltYXRlKHRyaWdnZXJFbGVtZW50LCB0bCkge1xyXG4gIGNvbnN0IHNjZW5lID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHtcclxuICAgIHJldmVyc2U6IGZhbHNlLFxyXG4gICAgdHJpZ2dlckhvb2s6IHRyaWdnZXJIb29rLFxyXG4gICAgdHJpZ2dlckVsZW1lbnQ6IHRyaWdnZXJFbGVtZW50XHJcbiAgfSlcclxuICAuc2V0VHdlZW4odGwpXHJcbiAgLmFkZFRvKHNjcm9sbENvbnRyb2xsZXIpO1xyXG4gIFxyXG4gIGlmKGRlYnVnKVxyXG4gIHtcclxuICAgIHNjZW5lLmFkZEluZGljYXRvcnMoKTtcclxuICB9XHJcbn0iXX0=
